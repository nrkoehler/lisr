<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Population • lisr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Population">
<meta property="og:description" content="lisr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lisr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/v01_maps.html">Geographic maps</a>
    </li>
    <li>
      <a href="../articles/v02_population.html">Population</a>
    </li>
    <li>
      <a href="../articles/v03_housing.html">Building activity and housing</a>
    </li>
    <li>
      <a href="../articles/v04_weather.html">Administrative area and weather</a>
    </li>
    <li>
      <a href="../articles/v05-babynames.html">Babynames</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nrkoehler/lisr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="v02_population_files/header-attrs-2.6/header-attrs.js"></script><script src="v02_population_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Population</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nrkoehler/lisr/blob/master/vignettes/v02_population.Rmd"><code>vignettes/v02_population.Rmd</code></a></small>
      <div class="hidden name"><code>v02_population.Rmd</code></div>

    </div>

    
    
<div id="r-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#r-packages" class="anchor"></a>R packages</h2>
<p>Für die folgenden Analysen werden zwei R Pakete benötigt:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nrkoehler/lisr">lisr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></pre></div>
</div>
<div id="data-import" class="section level2">
<h2 class="hasAnchor">
<a href="#data-import" class="anchor"></a>Data import</h2>
<p>Mit der <code><a href="../reference/get_lis_pop.html">lisr::get_lis_pop()</a></code> Funktion werden die Bevölkerungsdaten eingelesen. Das Argument <code>rubrik_nr</code> kann die folgenden Werte annehmen:</p>
<ul>
<li>1 (Einwohner; Residents)</li>
<li>2 (Einwohner nach Alter; Residents by age)</li>
<li>3 (Wohnberechtigte Einwohner nach Alter; Residents entitled to live by age)</li>
</ul>
<p>Wir schauen uns im Folgenden die Anzahl der Einwohner über die letzten 20 Jahre an.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_lis_pop.html">get_lis_pop</a></span><span class="op">(</span>rubrik_nr <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></pre></div>
</div>
<div id="data-exploration" class="section level2">
<h2 class="hasAnchor">
<a href="#data-exploration" class="anchor"></a>Data exploration</h2>
<p>Der importierte Datensatz enthält 23 Spalten und 27 Zeilen. Die Variablen haben die folgenden Namen:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>
<span class="co">#&gt;  [1] "KENNZIFFER" "EINHEIT"    "JAHR_2000"  "JAHR_2001"  "JAHR_2002" </span>
<span class="co">#&gt;  [6] "JAHR_2003"  "JAHR_2004"  "JAHR_2005"  "JAHR_2006"  "JAHR_2007" </span>
<span class="co">#&gt; [11] "JAHR_2008"  "JAHR_2009"  "JAHR_2010"  "JAHR_2011"  "JAHR_2012" </span>
<span class="co">#&gt; [16] "JAHR_2013"  "JAHR_2014"  "JAHR_2015"  "JAHR_2016"  "JAHR_2017" </span>
<span class="co">#&gt; [21] "JAHR_2018"  "JAHR_2019"  "JAHR_2020"</span></pre></div>
<p>Da es sich bei den im Datensatz enthaltenen Angaben um Zähldaten handelt, ist die Angabe einer Einheit nicht sinnvoll. Folgerichtig enthält die Variable <code>EINHEIT</code> keine Werte und kann somit gelöscht werden.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">EINHEIT</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 0</span>

<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">EINHEIT</span><span class="op">)</span></pre></div>
<p>Die Variable KENNZIFFER gibt die Bedeutung der im Datensatz enthaltenen Datenreihen wieder.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">data</span><span class="op">$</span><span class="va">KENNZIFFER</span>
<span class="co">#&gt;  [1] "Bevölkerung insgesamt"  "Männer"                 "Frauen"                </span>
<span class="co">#&gt;  [4] "Deutsche"               "Männer"                 "Frauen"                </span>
<span class="co">#&gt;  [7] "Ausländer"              "Männer"                 "Frauen"                </span>
<span class="co">#&gt; [10] "Bevölkerung insgesamt"  "Männer"                 "Frauen"                </span>
<span class="co">#&gt; [13] "Deutsche"               "Männer"                 "Frauen"                </span>
<span class="co">#&gt; [16] "Ausländer"              "Männer"                 "Frauen"                </span>
<span class="co">#&gt; [19] "Bevölkerung insgesamt"  "Männer (Melderegister)" "Frauen (Melderegister)"</span>
<span class="co">#&gt; [22] "Deutsche"               "Männer"                 "Frauen"                </span>
<span class="co">#&gt; [25] "Ausländer"              "Männer"                 "Frauen"</span></pre></div>
<p>Leider sind die Angaben nicht eindeutig, sodass einige Nacharbeiten erforderlich sind.</p>
</div>
<div id="data-wrangling" class="section level2">
<h2 class="hasAnchor">
<a href="#data-wrangling" class="anchor"></a>Data wrangling</h2>
<p>Im folgenden Code-Block werden zwei neue Variablen erzeugt. Die Variable <code>QUELLE</code> bezeichnet die Herkunft der Daten; die ersten neun Zeilen enthalten Angaben des “Statistischen Landesamtes Sachsen”, die Zeilen 10 bis 18 geben die Anzahl der Einwohner mit Hauptwohnsitz und die Zeilen 19 bis 27 geben die Anzahl der Einwohner mit Haupt- oder Nebenwohnsitz wieder. Diese Angaben stammen vom Leipziger Melderegister. Die Variable <code>HERKUNFT</code> gibt an, ob sich die Zahlen auf Deutsche oder Ausländer beziehen. Abschließend werden die Angaben aus den Variablen <code>KENNZIFFER</code> und <code>HERKUNFT</code> in der Variable <code>KENNZIFFER</code> zusammengefasst. Die Variable <code>HERKUNFT</code> wird nun nicht mehr benötigt.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>
    QUELLE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"Statistisches Landesamtes Sachsen"</span>, <span class="fl">9</span><span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"Leipizger Melderegister\n(Hauptwohnsitz)"</span>, <span class="fl">9</span><span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"Leipizger Melderegister\n(Haupt- oder Nebenwohnsitz)"</span>, <span class="fl">9</span><span class="op">)</span>
    <span class="op">)</span>,
    HERKUNFT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"Gesamt"</span>, <span class="fl">3</span><span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"Deutsche"</span>, <span class="fl">3</span><span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"Ausländer"</span>, <span class="fl">3</span><span class="op">)</span>
    <span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>,
    KENNZIFFER <span class="op">=</span> <span class="fu">str_extract</span><span class="op">(</span><span class="va">KENNZIFFER</span>, <span class="st">"^\\w+"</span><span class="op">)</span>,
    KENNZIFFER <span class="op">=</span> <span class="fu">str_replace</span><span class="op">(</span><span class="va">KENNZIFFER</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Deutsche"</span>, <span class="st">"Ausländer"</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span>, <span class="st">"Gesamt"</span><span class="op">)</span>,
    KENNZIFFER <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">KENNZIFFER</span>, <span class="va">HERKUNFT</span>, sep <span class="op">=</span> <span class="st">": "</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">relocate</span><span class="op">(</span><span class="va">QUELLE</span>, <span class="va">KENNZIFFER</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">HERKUNFT</span><span class="op">)</span></pre></div>
<p>Da uns zunächst nur die Angaben zur Gesamtbevölkerung interessieren, wird ein entsprechender Filter gesetzt. Mit der <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">tidyr::pivot_longer()</a></code> Funktion wird aus dem vorliegenden flachen ein tiefer Datensatz gemacht. Die Jahresangaben werden vom String “JAHR_” befreit und in das Format <code>numeric</code> umgewandelt.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">data.sub</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">KENNZIFFER</span> <span class="op">==</span> <span class="st">"Bevölkerung: Gesamt"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">pivot_longer</span><span class="op">(</span>
    cols <span class="op">=</span> <span class="fu">starts_with</span><span class="op">(</span><span class="st">"JAHR"</span><span class="op">)</span>,
    names_to <span class="op">=</span> <span class="st">"Year"</span>,
    values_to <span class="op">=</span> <span class="st">"Residents"</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>Year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu">str_remove</span><span class="op">(</span><span class="va">Year</span>, <span class="st">"JAHR_"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></pre></div>
<p>Abschließend lassen sich die Daten mit dem <code>ggplot2</code>-Paket visualisieren. Betrachtet man nur die Einwohner mit Hauptwohnsitz, so wuchs deren Anzahl in den letzten 20 Jahren von etwa 480.000 auf etwa 600.000, was einer Zunahme um 25 Prozent entspricht.</p>
</div>
<div id="data-visualisation" class="section level2">
<h2 class="hasAnchor">
<a href="#data-visualisation" class="anchor"></a>Data visualisation</h2>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu">ggplot</span><span class="op">(</span><span class="va">data.sub</span>, <span class="fu">aes</span><span class="op">(</span>
  x <span class="op">=</span> <span class="va">Year</span>,
  y <span class="op">=</span> <span class="va">Residents</span> <span class="op">/</span> <span class="fl">1000</span>,
  colour <span class="op">=</span> <span class="va">QUELLE</span>
<span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">2000</span>, <span class="fl">2019</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">480</span>, <span class="fl">650</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">hrbrthemes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/hrbrthemes/man/theme_ipsum_rc.html">theme_modern_rc</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>
    colour <span class="op">=</span> <span class="cn">NULL</span>,
    y <span class="op">=</span> <span class="st">"Residents (1.000)"</span>,
    title <span class="op">=</span> <span class="st">"Population of Leipzig"</span>,
    subtitle <span class="op">=</span> <span class="st">"Number of residents (2000 to 2019)"</span>,
    caption <span class="op">=</span> <span class="st">"Source: Leipzig Informationssystem, 2020"</span>
  <span class="op">)</span></pre></div>
<p><img src="v02_population_files/figure-html/pop-plot-1.png" width="100%"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Norbert Koehler.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
